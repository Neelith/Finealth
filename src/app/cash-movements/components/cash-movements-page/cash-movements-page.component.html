<app-page-title-bar
  [title]="this.pageTitle"
  (onAddEvent)="this.showAddMovementForm()"
></app-page-title-bar>

<div class="main-content">
  <ng-container *ngIf="showTable()">
    <app-r-table
      [headerVisible]="false"
      [entities$]="this.movements$"
      [columns]="this.displayedColumns"
      (onEditEntityEvent)="this.showEditMovementForm($event)"
      (onDeleteEntityEvent)="this.deleteMovement($event)"
      (onOpenDetailsEvent)="this.showMovementDetails($event)"
    ></app-r-table>
  </ng-container>

  <ng-container *ngIf="addFormEnabled"
    ><app-cu-form
      [formControlDescriptors]="addFormControlDescriptors"
      [submitButtonText]="'INSERISCI'"
      (submitFormEvent)="addMovement($event)"
      (cancelFormEvent)="onCancelForm()"
    ></app-cu-form
  ></ng-container>

  <ng-container *ngIf="editFormEnabled"
    ><app-cu-form
      [formControlDescriptors]="editFormControlDescriptors"
      [submitButtonText]="'MODIFICA'"
      (submitFormEvent)="editMovement($event)"
      (cancelFormEvent)="onCancelForm()"
    ></app-cu-form
  ></ng-container>

  <ng-container *ngIf="detailsViewEnabled">
    <app-generic-view
      [detailsViewDescriptors]="this.detailsViewDescriptors"
      [backButtonText]="'INDIETRO'"
      (OnBackEvent)="onCancelForm()"
    ></app-generic-view>
  </ng-container>
</div>
